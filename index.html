<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IELTS Learning Hub</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="logo">IELTS 7+ 🎓</div>
      <nav class="nav">
        <div class="nav-title">知识庄园</div>
        <button class="nav-item active" data-scroll="hero">首页</button>
        <button class="nav-item" data-scroll="vocab">单词学习</button>
        <button class="nav-item" data-scroll="listening">听力训练</button>
        <button class="nav-item" data-scroll="speaking">口语训练</button>
        <button class="nav-item" data-scroll="reading">阅读训练</button>
        <button class="nav-item" data-scroll="writing">写作训练</button>
        <div class="nav-title mt">Explore</div>
        <button class="nav-item" data-scroll="mock">真题演练</button>
        <button class="nav-item" data-scroll="idiom">地道英语</button>
      </nav>
    </aside>

    <main class="main">
      <header class="header">
        <div class="tagline">
          <div class="quote-en">“The journey of a thousand miles begins with a single step.”</div>
          <div class="quote-cn">千里之行，始于足下</div>
        </div>
        <div class="top-right">
          <div class="chip gold">💰 <span id="coinCount">0</span>G</div>
          <div class="chip">TARGET AVG <span id="targetAverage">7.0</span></div>
          <div class="chip ghost">距离考试 <span id="examCountdown">未设置</span></div>
          <button class="avatar" id="btnAuth">U</button>
        </div>
      </header>

      <section class="hero" id="hero">
        <div class="hero-left">
          <p class="hello">早安，准 <span id="avgDisplay">7.0</span> 分选手！✨</p>
          <p class="status">今日庄园状态：<span class="status-label">需除草</span> (ง •̀_•́)ง</p>
          <div class="hero-actions">
            <button class="btn primary" id="ctaEnter">进入我的庄园</button>
            <label class="btn ghost date-btn">
              设置考试日期
              <input type="date" id="examDateInput" />
            </label>
          </div>
          <div class="hero-icons">🏡 🌽 🌲 😊</div>
        </div>
        <div class="word-card">
          <div class="word-title">单词学习</div>
          <div class="word-num"><span id="wordToday">0</span>/<input id="wordTarget" type="number" value="30" min="1" max="200" /></div>
          <button class="btn secondary" id="ctaVocab">开始背诵</button>
        </div>
      </section>

      <section class="targets" id="targets">
        <h3>专项突破 (Target Gaps)</h3>
        <div class="target-grid">
          <div class="target-card">
            <div class="target-top"><span class="pill blue">READING</span><span class="icon">📘</span></div>
            <div class="score-row"><span id="readingScore">7.5</span><span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：学术类长难句分析</div>
          </div>
          <div class="target-card">
            <div class="target-top"><span class="pill purple">LISTENING</span><span class="icon">🎧</span></div>
            <div class="score-row"><span id="listeningScore">7</span><span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：1.2x 倍速听写</div>
          </div>
          <div class="target-card">
            <div class="target-top"><span class="pill red">SPEAKING</span><span class="icon">🎤</span></div>
            <div class="score-row"><span id="speakingScore">6.5</span><span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：Part 2 流利度跟读</div>
          </div>
          <div class="target-card">
            <div class="target-top"><span class="pill orange">WRITING</span><span class="icon">✏️</span></div>
            <div class="score-row"><span id="writingScore">6.5</span><span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：复杂句式汉译英</div>
          </div>
        </div>
      </section>

      <section class="grid-two" id="gridQuick">
        <div class="card-panel quad">
          <div class="card-title">快捷入口 💫</div>
          <div class="quad-grid">
            <button class="quad-item" data-scroll="listening">🎧 听力训练</button>
            <button class="quad-item" data-scroll="speaking">🗣️ 口语训练</button>
            <button class="quad-item" data-scroll="reading">📖 阅读训练</button>
            <button class="quad-item" data-scroll="writing">✏️ 写作训练</button>
          </div>
        </div>
        <div class="card-panel countdown">
          <div class="card-title">考试倒计时</div>
          <div class="count-value" id="countValue">未设置</div>
          <label class="btn ghost date-btn small">
            重新设置
            <input type="date" id="examDateInput2" />
          </label>
        </div>
      </section>

      <section class="grid-two" id="stats">
        <div class="card-panel">
          <div class="card-title">学习时长柱状图</div>
          <canvas id="timeChart" height="220"></canvas>
        </div>
        <div class="card-panel tip-box">
          <div class="card-title">温馨提示 😊</div>
          <p>保持每日打卡，i+1 阶梯式提升；复习要跟上节奏，别让遗忘曲线追上你！</p>
        </div>
      </section>

      <!-- 单词学习区 -->
      <section class="card-panel large" id="vocab">
        <div class="panel-head">
          <div>
            <div class="card-title">单词学习 🪴</div>
            <div class="hint">点击释义，高亮加入生词本；完成后可听写/释义复习。</div>
          </div>
          <button class="btn secondary" id="btnReview">快速复习</button>
        </div>
        <div class="vocab-flex">
          <div class="vocab-main">
            <div class="vocab-word" id="vocabWord">earthquake</div>
            <div class="pill ghost" id="vocabFreq">高频</div>
            <div class="vocab-options" id="vocabOptions"></div>
            <div class="vocab-btns">
              <button class="btn primary" id="knowBtn">认识 ✅</button>
              <button class="btn ghost" id="dontKnowBtn">不认识 ❌</button>
              <button class="btn ghost" id="addNotebookBtn">加入生词本</button>
            </div>
          </div>
          <div class="vocab-detail" id="vocabDetail"></div>
        </div>
      </section>

      <!-- 各训练区 -->
      <section class="card-panel" id="listening">
        <div class="card-title">听力训练 🎧</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row">
          <span class="timer" data-module="listening">00:00</span>
          <button class="btn ghost start-btn" data-module="listening">开始</button>
        </div>
      </section>

      <section class="card-panel" id="speaking">
        <div class="card-title">口语训练 🎙️</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row">
          <span class="timer" data-module="speaking">00:00</span>
          <button class="btn ghost start-btn" data-module="speaking">开始</button>
        </div>
      </section>

      <section class="card-panel" id="reading">
        <div class="card-title">阅读训练 📖</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row">
          <span class="timer" data-module="reading">00:00</span>
          <button class="btn ghost start-btn" data-module="reading">开始</button>
        </div>
      </section>

      <section class="card-panel" id="writing">
        <div class="card-title">写作训练 ✏️</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row">
          <span class="timer" data-module="writing">00:00</span>
          <button class="btn ghost start-btn" data-module="writing">开始</button>
        </div>
      </section>

      <section class="card-panel" id="mock">
        <div class="card-title">真题演练 🎯（锁定考试参数）</div>
        <div class="hint">全真计时，倍速/音色/口音/主题已锁定。</div>
        <button class="btn primary" id="startMock">开始模拟</button>
        <div id="mockReport" class="report"></div>
      </section>

      <section class="card-panel" id="idiom">
        <div class="card-title">地道英语 / 俚语 / 热梗 🎬</div>
        <div class="search-row">
          <input id="idiomSearch" placeholder="输入英文或中文关键词" />
          <button id="searchIdiom" class="btn">查询</button>
        </div>
        <div id="idiomList" class="list"></div>
      </section>

      <section class="card-panel" id="export">
        <div class="card-title">导出学习内容</div>
        <div class="actions">
          <button id="exportExcel" class="btn">导出 Excel</button>
          <button id="exportPdf" class="btn ghost">导出 PDF</button>
        </div>
        <div class="hint">导出生词本 / 错题本 / 真题报告 / 句式库。</div>
      </section>
    </main>
  </div>

  <!-- 登录/测试浮层 -->
  <div class="overlay" id="authOverlay">
    <div class="overlay-card">
      <div class="overlay-left">
        <h3>手机号注册 / 登录（演示）</h3>
        <label>手机号（含国家码）</label>
        <input id="phoneInput" placeholder="+86 13800138000" />
        <label>验证码</label>
        <div class="inline">
          <input id="otpInput" placeholder="6 位数字" />
          <button id="sendOtp" class="btn ghost">发送验证码</button>
        </div>
        <button id="verifyOtp" class="btn primary full">登录</button>
        <div class="hint">演示用，不调真实短信；如需真实短信，请配置 Supabase。</div>
      </div>
      <div class="overlay-right">
        <h3>入站简易测试（可先估分）</h3>
        <div class="slider-group"><span>听力</span><input type="range" min="0" max="9" step="0.5" value="5" id="testListening"><span id="valListening">5</span></div>
        <div class="slider-group"><span>口语</span><input type="range" min="0" max="9" step="0.5" value="5" id="testSpeaking"><span id="valSpeaking">5</span></div>
        <div class="slider-group"><span>阅读</span><input type="range" min="0" max="9" step="0.5" value="5" id="testReading"><span id="valReading">5</span></div>
        <div class="slider-group"><span>写作</span><input type="range" min="0" max="9" step="0.5" value="5" id="testWriting"><span id="valWriting">5</span></div>
        <button id="saveProfile" class="btn primary full">保存目标分 & 进入首页</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
