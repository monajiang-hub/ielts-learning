<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IELTS Learning Hub</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <nav class="nav">
        <button class="nav-item active" data-scroll="hero">
          <span class="nav-icon">📊</span>
          <span>数据中心</span>
        </button>
        
        <div class="nav-title">Foundation</div>
        <button class="nav-item" data-scroll="vocab">
          <span class="nav-icon">📖</span>
          <span>单词学习</span>
        </button>
        <button class="nav-item" data-scroll="wordbook">
          <span class="nav-icon">📚</span>
          <span>雅思单词书</span>
        </button>
        <button class="nav-item" data-scroll="wordsearch">
          <span class="nav-icon">🔍</span>
          <span>单词查询</span>
        </button>
        
        <div class="nav-title mt">Training Modules</div>
        <button class="nav-item" data-scroll="listening">
          <span class="nav-icon">🎧</span>
          <span>听力训练</span>
        </button>
        <button class="nav-item" data-scroll="speaking">
          <span class="nav-icon">🎤</span>
          <span>口语训练</span>
        </button>
        <button class="nav-item" data-scroll="reading">
          <span class="nav-icon">📘</span>
          <span>阅读训练</span>
        </button>
        <button class="nav-item" data-scroll="writing">
          <span class="nav-icon">✏️</span>
          <span>写作训练</span>
        </button>
        
        <div class="nav-title mt">System</div>
        <button class="nav-item" data-scroll="mock">
          <span class="nav-icon">🎯</span>
          <span>真题演练</span>
        </button>
        <button class="nav-item" data-scroll="idiom">
          <span class="nav-icon">🎬</span>
          <span>地道英语</span>
        </button>
        <button class="nav-item" data-scroll="settings">
          <span class="nav-icon">⚙️</span>
          <span>全局设置</span>
        </button>
      </nav>
    </aside>

    <main class="main">
      <header class="header">
        <div class="header-left">
          <div class="logo-header">
            <div class="logo-icon">🎓</div>
            <span class="logo-text">IELTS 7+</span>
          </div>
          <div class="tagline">
            <div class="quote-en">"The journey of a thousand miles begins with a single step."</div>
            <div class="quote-cn">千里之行，始于足下</div>
          </div>
        </div>
        <div class="top-right">
          <div class="target-display" onclick="startAssessment(true)">
            <div class="target-label">MY TARGET</div>
            <div class="target-value">
              <span id="targetAverage">7.0</span>
              <span class="target-unit">avg</span>
            </div>
          </div>
          <div class="divider"></div>
          <div class="chip gold">
            <span class="coin-icon">💰</span>
            <span id="coinCount">0</span>G
          </div>
          <div class="chip ghost">距离考试 <span id="examCountdown">未设置</span></div>
          <div class="avatar" id="userAvatar" onclick="showUserSettings()">
            <span id="avatarText">U</span>
            <img id="avatarImage" src="" alt="" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" />
          </div>
        </div>
      </header>

      <!-- 首页内容（默认显示） -->
      <div class="homepage-content">
      <div class="hero-grid">
        <section class="manor-card" id="manor">
          <div class="manor-content">
            <h2 class="manor-title">我的知识庄园</h2>
            <p class="manor-subtitle">Lv.2 维多利亚时期 • 点击打理你的领地</p>
          </div>
          <div class="manor-icons">
            <div class="manor-icon-item" onclick="alert('进入主屋：休息回血')">
              <div class="manor-icon">🏡</div>
              <span class="manor-icon-label">主屋</span>
            </div>
            <div class="manor-icon-item" onclick="alert('进入农田：收割金币')">
              <div class="manor-icon">🌽</div>
              <span class="manor-icon-label">词汇田</span>
            </div>
            <div class="manor-icon-item" onclick="alert('进入林场：查看成就')">
              <div class="manor-icon">🌲</div>
              <span class="manor-icon-label">阅读林</span>
            </div>
          </div>
        </section>

        <section class="plan-card">
          <div class="plan-header">
            <h3 class="plan-title">📝 今日计划</h3>
            <span class="plan-badge">Today</span>
          </div>
          <div class="plan-list" id="planList">
            <!-- 计划列表将通过JS动态生成 -->
          </div>
          <div class="plan-input-group">
            <input type="text" id="planInput" placeholder="添加新计划..." class="plan-input" />
            <button class="plan-add-btn" onclick="addPlan()">+</button>
          </div>
        </section>
      </div>

      <section class="word-card-section">
        <div class="word-card">
          <div class="word-title">单词学习</div>
          <div class="word-progress">
            <div class="word-row">
              <span class="word-label">今日新词：</span>
              <span class="word-num"><span id="wordToday">0</span>/<span id="wordTarget">30</span></span>
            </div>
            <div class="word-row">
              <span class="word-label">待复习：</span>
              <span class="word-num review"><span id="wordReview">0</span>/<span id="wordReviewTarget">60</span></span>
            </div>
            <div class="word-row ratio-row">
              <span class="word-label" id="vocabRatioDisplay">新词:复习 = 1:2</span>
              <button class="btn-link" id="btnSetRatio">设置比例</button>
            </div>
            <div class="word-row">
              <span class="word-label">每日新词目标：</span>
              <button class="btn-link" id="btnSetTarget">设置数量</button>
            </div>
          </div>
          <button class="btn secondary" id="ctaVocab">开始背诵</button>
        </div>
      </section>

      <section class="targets" id="targets">
        <h3>专项突破 (Target Gaps)</h3>
        <div class="target-grid">
          <div class="target-card">
            <div class="target-top">
              <span class="pill blue">READING</span>
              <span class="icon">📘</span>
            </div>
            <div class="score-row"><span id="readingScore">7.5</span> <span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：学术类长难句分析</div>
          </div>
          <div class="target-card">
            <div class="target-top">
              <span class="pill purple">LISTENING</span>
              <span class="icon">🎧</span>
            </div>
            <div class="score-row"><span id="listeningScore">7</span> <span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：1.2x 倍速听写</div>
          </div>
          <div class="target-card">
            <div class="target-top">
              <span class="pill red">SPEAKING</span>
              <span class="icon">🎤</span>
            </div>
            <div class="score-row"><span id="speakingScore">6.5</span> <span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：Part 2 流利度跟读</div>
          </div>
          <div class="target-card">
            <div class="target-top">
              <span class="pill orange">WRITING</span>
              <span class="icon">✏️</span>
            </div>
            <div class="score-row"><span id="writingScore">6.5</span> <span class="label">Target Score</span></div>
            <div class="hint">i+1 推荐：复杂句式汉译英</div>
          </div>
        </div>
      </section>

      <section class="grid-two" id="stats">
        <div class="card-panel">
          <div class="card-header">
            <div class="card-title">听说读写学习时长</div>
            <div class="range-tabs">
              <button class="range-tab active" data-range="today">今日</button>
              <button class="range-tab" data-range="week">本周</button>
              <button class="range-tab" data-range="month">本月</button>
              <button class="range-tab" data-range="quarter">本季度</button>
              <button class="range-tab" data-range="year">本年</button>
              <button class="range-tab" data-range="custom">自定义</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="timeChart"></canvas>
          </div>
          <div class="chart-hint">每天坚持30分钟听力+30分钟阅读，配合适量口语和写作练习，分数会慢慢涨起来~</div>
        </div>
        <div class="card-panel countdown">
          <div class="card-title">考试倒计时</div>
          <div class="count-value" id="countValue">未设置</div>
          <input type="date" id="examDateInput" class="date-input" style="display: none;" />
          <button class="btn ghost" id="btnSetExam">设置考试日期</button>
        </div>
      </section>
      </div>

      <!-- 能力测评模态框 -->
      <div id="assessModal" class="modal-overlay hidden">
        <div class="modal-content">
          <div class="modal-sidebar">
            <h2 class="modal-title">能力测评</h2>
            <ul class="modal-steps">
              <li class="step-item active">
                <span class="step-number">1</span>
                <span>词汇量</span>
              </li>
              <li class="step-item">
                <span class="step-number">2</span>
                <span>听力/阅读</span>
              </li>
              <li class="step-item">
                <span class="step-number">3</span>
                <span>口语/写作</span>
              </li>
              <li class="step-item">
                <span class="step-number">4</span>
                <span>目标设定</span>
              </li>
            </ul>
            <button class="modal-close" onclick="closeAssessment()">退出测试</button>
          </div>
          <div class="modal-main">
            <div id="stage1" class="assessment-stage">
              <h3 class="stage-title">Q1. Select the synonym for "MITIGATE"</h3>
              <div class="stage-options">
                <button class="option-btn" onclick="nextStage(2, false)">Worsen</button>
                <button class="option-btn" onclick="nextStage(2, true)">Alleviate</button>
              </div>
            </div>
            <div id="stage4" class="assessment-stage hidden">
              <h3 class="stage-title">设定你的目标分数</h3>
              <p class="stage-subtitle">系统将根据差距生成计划。</p>
              <div class="goal-grid">
                <div class="goal-item">
                  <label>Listening Goal</label>
                  <input type="number" id="goalL" value="7.0" step="0.5" />
                </div>
                <div class="goal-item">
                  <label>Reading Goal</label>
                  <input type="number" id="goalR" value="7.5" step="0.5" />
                </div>
                <div class="goal-item">
                  <label>Writing Goal</label>
                  <input type="number" id="goalW" value="6.5" step="0.5" />
                </div>
                <div class="goal-item">
                  <label>Speaking Goal</label>
                  <input type="number" id="goalS" value="6.5" step="0.5" />
                </div>
              </div>
              <button class="btn primary" onclick="finishAssessment()">生成学习计划</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 用户设置模态框 -->
      <div id="userSettingsModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 500px; height: auto;">
          <div class="modal-main" style="padding: 32px;">
            <h2 class="modal-title" style="margin-bottom: 24px;">个人设置</h2>
            <div class="settings-form">
              <div class="setting-item">
                <label>用户名</label>
                <input type="text" id="userNameInput" placeholder="输入你的名字" class="setting-input" />
              </div>
              <div class="setting-item">
                <label>头像</label>
                <div class="avatar-upload">
                  <div class="avatar-preview" id="avatarPreview">
                    <span id="previewText">U</span>
                    <img id="previewImage" src="" alt="" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" />
                  </div>
                  <div class="avatar-options">
                    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;" />
                    <button class="btn ghost" onclick="document.getElementById('avatarFileInput').click()">上传图片</button>
                    <button class="btn ghost" onclick="useDefaultAvatar()">使用默认</button>
                  </div>
                </div>
              </div>
              <div class="setting-actions">
                <button class="btn primary" onclick="saveUserSettings()">保存</button>
                <button class="btn ghost" onclick="closeUserSettings()">取消</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 新词数量设置模态框 -->
      <div id="targetModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 400px; height: auto;">
          <div class="modal-main" style="padding: 32px;">
            <h2 class="modal-title" style="margin-bottom: 24px;">设置每日新词目标</h2>
            <div class="setting-item">
              <label>每日新词数量</label>
              <input type="number" id="newWordTargetInput" min="1" max="200" step="1" class="setting-input" />
              <p class="setting-hint">建议范围：10-100个/天</p>
            </div>
            <div class="setting-actions">
              <button class="btn primary" onclick="saveWordTarget()">保存</button>
              <button class="btn ghost" onclick="closeTargetModal()">取消</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 查词弹窗 -->
      <div id="dictPopover" class="dict-popover">
        <div class="dict-header">
          <h4 class="dict-word" id="popWord">Word</h4>
          <span class="dict-sound">🔊</span>
        </div>
        <p class="dict-phonetic" id="popPhonetic">/phonetic/</p>
        <p class="dict-definition" id="popDef">Loading...</p>
        <div class="dict-meta" id="popMeta"></div>
        <button class="dict-add-btn" id="popAddBtn">+ 加入生词本</button>
      </div>

      <!-- 详细页面（默认隐藏，通过导航显示） -->
      <section class="detail-page" id="vocab">
        <div class="vocab-header">
          <h2 class="vocab-page-title">单词突击</h2>
          <button class="btn ghost btn-sm" id="btnSetVocabRatio">
            <span>⚙️</span> 复习模式
          </button>
        </div>
        <div class="vocab-card">
          <div class="vocab-progress-indicator">
            <span id="vocabProgress">1 / 20</span>
          </div>
          <div class="vocab-content">
            <div class="vocab-emoji">🤔</div>
            <h3 class="vocab-word-large" id="vocabWord">MITIGATE</h3>
            <p class="vocab-hint" id="vocabHint">[点击查看释义]</p>
            <div class="vocab-options" id="vocabOptions"></div>
            <div class="vocab-actions">
              <button class="btn-vocab btn-dont-know" id="dontKnowBtn">不认识</button>
              <button class="btn-vocab btn-know" id="knowBtn">认识</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card-panel detail-page" id="listening">
        <div class="card-title">听力训练 🎧</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row"><span class="timer" data-module="listening">00:00</span><button class="btn ghost start-btn" data-module="listening">开始</button></div>
      </section>

      <section class="card-panel detail-page" id="speaking">
        <div class="card-title">口语训练 🎙️</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row"><span class="timer" data-module="speaking">00:00</span><button class="btn ghost start-btn" data-module="speaking">开始</button></div>
      </section>

      <section class="card-panel detail-page" id="reading">
        <div class="card-title">阅读训练 📖</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row"><span class="timer" data-module="reading">00:00</span><button class="btn ghost start-btn" data-module="reading">开始</button></div>
        <div class="reading-content interactive-text">
          <p>The concept of <span>sustainability</span> has become <span>ubiquitous</span> in modern discourse. Governments are striving to <span>implement</span> policies that <span>mitigate</span> environmental degradation.</p>
          <p>However, critics argue that these measures are often <span>superficial</span>. True change requires a <span>paradigm</span> shift in how we consume resources. For instance, the <span>proliferation</span> of electric vehicles...</p>
          <p class="reading-tip">[Tip: Click any word above to look it up!]</p>
        </div>
      </section>

      <section class="card-panel detail-page" id="writing">
        <div class="card-title">写作训练 ✏️</div>
        <div class="hint">i+1 难度，计时记录</div>
        <div class="timer-row"><span class="timer" data-module="writing">00:00</span><button class="btn ghost start-btn" data-module="writing">开始</button></div>
      </section>

      <section class="detail-page" id="mock">
        <div class="mock-container">
          <!-- 顶部导航栏 -->
          <div class="mock-nav">
            <button class="mock-nav-btn" data-type="comprehensive">
              <span>📊</span> 雅思综合
            </button>
            <button class="mock-nav-btn active" data-type="listening">
              <span>🎧</span> 听力
            </button>
            <button class="mock-nav-btn" data-type="reading">
              <span>📖</span> 阅读
            </button>
            <button class="mock-nav-btn" data-type="writing">
              <span>✏️</span> 写作
            </button>
            <button class="mock-nav-btn" data-type="speaking">
              <span>🎤</span> 口语
            </button>
          </div>
          
          <!-- 搜索和筛选 -->
          <div class="mock-filters">
            <div class="mock-search">
              <input type="text" id="mockSearchInput" placeholder="Search..." class="mock-search-input" />
              <span class="mock-search-icon">🔍</span>
            </div>
            <select id="mockSortSelect" class="mock-sort">
              <option value="latest">最新</option>
              <option value="popular">最热</option>
              <option value="year">按年份</option>
            </select>
          </div>
          
          <!-- 年份筛选 -->
          <div class="mock-year-filter">
            <span class="filter-label">年份:</span>
            <div class="year-buttons" id="yearButtons">
              <!-- 年份按钮将通过JS动态生成 -->
            </div>
          </div>
          
          <!-- 题目列表 -->
          <div class="mock-list" id="mockList">
            <!-- 题目卡片将通过JS动态生成 -->
          </div>
        </div>
      </section>

      <!-- 答题界面模态框 -->
      <div id="mockExamModal" class="modal-overlay hidden">
        <div class="modal-content mock-exam-content">
          <div class="mock-exam-header">
            <div class="exam-title-info">
              <h2 id="examTitle">雅思真题试卷</h2>
              <p id="examSubtitle">2025年1月 - 听力真题1</p>
            </div>
            <div class="exam-timer">
              <span class="timer-label">剩余时间:</span>
              <span class="timer-value" id="examTimer">60:00</span>
            </div>
            <button class="modal-close-btn" onclick="closeMockExam()">×</button>
          </div>
          <div class="mock-exam-body" id="examBody">
            <!-- 题目内容将通过JS动态生成 -->
          </div>
          <div class="mock-exam-footer">
            <button class="btn ghost" onclick="closeMockExam()">退出</button>
            <button class="btn primary" onclick="submitMockExam()">提交答案</button>
          </div>
        </div>
      </div>

      <section class="detail-page" id="wordbook">
        <div class="wordbook-container">
          <!-- 顶部筛选栏 -->
          <div class="wordbook-filters">
            <div class="filter-group">
              <span class="filter-label">主题:</span>
              <div class="filter-buttons">
                <button class="filter-btn" data-topic="all">全部</button>
                <button class="filter-btn active" data-topic="true-scripture">雅思词汇真经</button>
                <button class="filter-btn" data-topic="check-in">雅思词汇打卡</button>
              </div>
            </div>
            
            <div class="filter-group">
              <span class="filter-label">场景:</span>
              <div class="filter-buttons scenario-buttons" id="scenarioButtons">
                <!-- 场景按钮将通过JS动态生成 -->
              </div>
            </div>
            
            <div class="filter-group">
              <span class="filter-label">状态:</span>
              <div class="filter-buttons">
                <button class="filter-btn" data-status="all">全部</button>
                <button class="filter-btn" data-status="unlabeled">未标注</button>
                <button class="filter-btn" data-status="known">认识</button>
                <button class="filter-btn" data-status="unknown">不认识</button>
                <button class="filter-btn" data-status="vague">模糊</button>
              </div>
            </div>
            
            <div class="filter-group">
              <span class="filter-label">模式:</span>
              <div class="filter-buttons">
                <button class="filter-btn active" data-mode="list">列表模式</button>
                <button class="filter-btn" data-mode="learn">学习模式</button>
                <button class="filter-btn" data-mode="dictation">听写</button>
                <button class="filter-btn" data-mode="flashcard">卡片背单词</button>
              </div>
            </div>
          </div>
          
          <!-- 单词卡片网格 -->
          <div class="wordbook-grid" id="wordbookGrid">
            <!-- 单词卡片将通过JS动态生成 -->
          </div>
          
          <!-- 底部操作栏 -->
          <div class="wordbook-actions" id="wordbookActions">
            <button class="action-btn btn-known" onclick="markCurrentWord('known')">认识</button>
            <button class="action-btn btn-unknown" onclick="markCurrentWord('unknown')">不认识</button>
            <button class="action-btn btn-vague" onclick="markCurrentWord('vague')">模糊</button>
            <button class="action-btn btn-add" onclick="addToAILearning()">+</button>
          </div>
        </div>
      </section>

      <!-- AI学习模态框 -->
      <div id="aiLearningModal" class="modal-overlay hidden">
        <div class="modal-content" style="max-width: 700px; height: auto; max-height: 80vh; overflow-y: auto;">
          <div class="modal-main" style="padding: 32px;">
            <div class="modal-header-flex">
              <h2 class="modal-title">AI学习内容</h2>
              <button class="modal-close-btn" onclick="closeAILearning()">×</button>
            </div>
            <div class="ai-learning-content" id="aiLearningContent">
              <div class="loading-ai">AI正在生成学习内容...</div>
            </div>
          </div>
        </div>
      </div>

      <section class="detail-page" id="wordsearch">
        <div class="wordsearch-container">
          <div class="wordsearch-header">
            <div>
              <h2 class="wordsearch-title">单词查询 🔍</h2>
              <p class="wordsearch-subtitle">输入单词，查询详细释义</p>
            </div>
          </div>
          <div class="wordsearch-search">
            <input type="text" id="wordSearchInput" placeholder="输入英文单词..." class="wordsearch-input" />
            <button id="btnWordSearch" class="wordsearch-btn">查询</button>
          </div>
          <div id="wordSearchResult" class="wordsearch-result">
            <div class="wordsearch-placeholder">
              <div class="placeholder-icon">📖</div>
              <p>输入英文单词开始查询</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 全局设置页面 -->
      <section class="detail-page" id="settings">
        <div class="settings-container">
          <h2 class="settings-title">全局设置 ⚙️</h2>
          
          <div class="settings-section">
            <h3 class="section-title">
              <span>🔊</span> 听力偏好 (Audio)
            </h3>
            
            <div class="settings-grid">
              <div class="setting-item-large">
                <label class="setting-label">默认口音</label>
                <div class="setting-options">
                  <button class="option-btn" data-setting="accent" data-value="uk" id="accentUK">
                    <span>🇬🇧</span> UK
                  </button>
                  <button class="option-btn active" data-setting="accent" data-value="us" id="accentUS">
                    <span>🇺🇸</span> US
                  </button>
                </div>
              </div>
              
              <div class="setting-item-large">
                <label class="setting-label">默认音色</label>
                <div class="setting-options">
                  <button class="option-btn active" data-setting="voice" data-value="male" id="voiceMale">
                    <span>👨</span> Male
                  </button>
                  <button class="option-btn" data-setting="voice" data-value="female" id="voiceFemale">
                    <span>👩</span> Female
                  </button>
                </div>
              </div>
            </div>
            
            <div class="setting-item-large">
              <label class="setting-label">默认倍速</label>
              <div class="speed-control">
                <input type="range" id="speedSlider" min="0.5" max="2" step="0.1" value="1.0" class="speed-slider" />
                <div class="speed-display">
                  <span class="speed-value" id="speedValue">1.0x</span>
                  <span class="speed-hint">(标准)</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="settings-section">
            <h3 class="section-title">
              <span>👁️</span> 阅读体验 (Visual)
            </h3>
            
            <div class="setting-item-large">
              <label class="setting-label">字体大小</label>
              <div class="setting-options">
                <button class="option-btn" data-setting="fontSize" data-value="small">
                  <span>A-</span>
                </button>
                <button class="option-btn active" data-setting="fontSize" data-value="medium">
                  <span>A</span>
                </button>
                <button class="option-btn" data-setting="fontSize" data-value="large">
                  <span>A+</span>
                </button>
              </div>
            </div>
            
            <div class="setting-item-large">
              <label class="setting-label">主题模式</label>
              <div class="setting-options">
                <button class="option-btn active" data-setting="theme" data-value="light" id="themeLight">
                  <span>☀️</span> 浅色
                </button>
                <button class="option-btn" data-setting="theme" data-value="dark" id="themeDark">
                  <span>🌙</span> 深色
                </button>
              </div>
            </div>
          </div>
          
          <div class="settings-section">
            <h3 class="section-title">
              <span>📚</span> 真题数据管理
            </h3>
            
            <div class="setting-item-large">
              <label class="setting-label">导入真题数据</label>
              <div class="import-section">
                <p class="import-hint">支持导入剑雅4-20真题数据（JSON格式）</p>
                <input type="file" id="importTestFile" accept=".json" style="display: none;" />
                <button class="btn primary" onclick="document.getElementById('importTestFile').click()">
                  选择文件导入
                </button>
                <button class="btn ghost" onclick="downloadTestTemplate()">
                  下载模板
                </button>
              </div>
            </div>
            
            <div class="setting-item-large">
              <label class="setting-label">数据来源说明</label>
              <div class="data-source-info">
                <p>📌 <strong>题源获取方式：</strong></p>
                <ul class="source-list">
                  <li>1. 购买官方剑桥雅思真题书籍（剑雅4-20）</li>
                  <li>2. 使用官方授权的在线平台（如 ieltsonlinetests.com）</li>
                  <li>3. 手动整理题目并按照模板格式导入</li>
                  <li>4. 联系教育机构获取授权数据</li>
                </ul>
                <p class="warning-text">⚠️ 注意：请确保使用的真题数据符合版权要求</p>
              </div>
            </div>
          </div>
          
          <div class="settings-actions">
            <button class="btn primary" onclick="saveGlobalSettings()">保存设置</button>
            <button class="btn ghost" onclick="resetSettings()">恢复默认</button>
          </div>
        </div>
      </section>

      <section class="card-panel detail-page" id="idiom">
        <div class="card-title">地道英语 / 俚语 / 热梗 🎬</div>
        <div class="search-row">
          <input id="idiomSearch" placeholder="输入英文或中文关键词" />
          <button id="searchIdiom" class="btn">查询</button>
        </div>
        <div id="idiomList" class="list"></div>
      </section>

      <section class="card-panel detail-page" id="export">
        <div class="card-title">导出学习内容</div>
        <div class="actions">
          <button id="exportExcel" class="btn">导出 Excel</button>
          <button id="exportPdf" class="btn ghost">导出 PDF</button>
        </div>
        <div class="hint">导出生词本 / 错题本 / 真题报告 / 句式库。</div>
      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>

